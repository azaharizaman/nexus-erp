# Laravel ERP PHP Configuration
# Optimized for development environment with PHP 8.3

[PHP]
; Core PHP settings
memory_limit = 2G
max_execution_time = 300
max_input_time = 300
upload_max_filesize = 100M
post_max_size = 100M
max_input_vars = 5000
default_socket_timeout = 60

; Error reporting and logging
error_reporting = E_ALL
display_errors = On
display_startup_errors = On
log_errors = On
error_log = /workspace/storage/logs/php-errors.log
log_errors_max_len = 0

; Date and locale
date.timezone = UTC

; Opcache (PHP bytecode caching)
opcache.enable = 1
opcache.enable_cli = 1
opcache.memory_consumption = 256M
opcache.interned_strings_buffer = 16
opcache.max_accelerated_files = 10000
opcache.validate_timestamps = 1
opcache.revalidate_freq = 0
opcache.fast_shutdown = 1

; Session configuration
session.save_path = /workspace/storage/sessions
session.gc_maxlifetime = 1209600

; File uploads
file_uploads = On
upload_tmp_dir = /workspace/storage/temp

; PostgreSQL specific
pgsql.allow_persistent = On
pgsql.max_persistent = -1
pgsql.max_links = -1
pgsql.auto_reset_persistent = Off
pgsql.ignore_notice = Off
pgsql.log_notice = Off

; MySQLi (for compatibility)
mysqli.allow_persistent = On
mysqli.max_persistent = -1
mysqli.max_links = -1
mysqli.cache_size = 2000
mysqli.default_socket = /run/mysqld/mysqld.sock
mysqli.default_host = localhost
mysqli.default_user = root
mysqli.default_pw =
mysqli.default_port = 3306
mysqli.connect_timeout = 10

; PDO
pdo_mysql.cache_size = 2000

; Xdebug configuration (development only)
[xdebug]
xdebug.mode = develop,debug,coverage
xdebug.start_with_request = yes
xdebug.client_host = host.docker.internal
xdebug.client_port = 9003
xdebug.idekey = laravel-erp
xdebug.log = /workspace/storage/logs/xdebug.log
xdebug.log_level = 0

; Redis configuration
[redis]
redis.host = localhost
redis.port = 6379
redis.timeout = 2.5
redis.read_timeout = 2.5
redis.auth =

; JSON extension
json.error_handler = json_error_handler

; String extensions
mbstring.internal_encoding = UTF-8
mbstring.language = neutral
mbstring.encoding_translation = Off

; Internationalization
intl.default_locale = en_US
intl.error_level = E_WARNING
intl.use_exceptions = Off
